{% extends "bootstrap/base.html" %}

{% block title %}{{ pageName }}{% endblock %}

{% block styles %}
    {{ super() }}
    <link href="{{ url_for("static", filename="css/style.css") }}" rel="stylesheet">
{% endblock %}
{% block navbar %}

{% endblock %}

{% block content %}
    <div id="myCarousel" class="carousel slide" data-ride="carousel">

        <!-- Wrapper for slides -->
        <div class="carousel-inner">
            {% for image in page.images %}

                <div class="item{% if loop.first %} active{% endif %}">
                    <div class="fillme" align="center">
                        <img class="img-responsive" src="{{ image.url }}"/>
                    </div>
                </div>
            {% endfor %}
        </div>

        <!-- Left and right controls -->
        <a class="left carousel-control" href="#myCarousel" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
{% endblock %}


{% block scripts %}
    {{ super() }}

    <script>
        $(window).load(scaleImages);
        $(window).resize(scaleImages);

        function scaleImages() {
            $('body').find('.fillme').each(function () {
                console.log($(this));
                var div = $('#myCarousel');
                var fillmeval = div.width() / div.height();
                var image = $(this).children('img')[0];
                var imgval = image.naturalWidth / image.naturalHeight;

                if (imgval > fillmeval) {
                    $(this).children('img').addClass("fullWidth").removeClass("fullHeight");
                } else {
                    $(this).children('img').addClass("fullHeight").removeClass("fullWidth");
                }
            });
        }
    </script>

{% endblock %}